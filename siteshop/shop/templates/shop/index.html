{% extends "base.html" %}
{% load static %}
{% load shop_tags %}

{% block menu_products %}

{% if items.count > 5 %}

<div id="SlideItMoo_outer">	
                <div id="SlideItMoo_inner">			
                    <div id="SlideItMoo_items">
                        
                    {% shuffled_items items as shuffled_items %}
                    {% for item in shuffled_items %}
                    {% if item.image %}
                    <div class="SlideItMoo_element">
                        
                        <a href="{{ item.get_absolute_url }}">
                        <img src={{ item.image.url }} height=100 /></a>

                    </div>
                    {% endif %}
                    {% endfor %}

                        </div>
                    </div>			
                </div>
            </div>

{% endif %}

{% endblock %}


{% block "content" %}

<div style="
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
    align-items: start;  <!-- Ключевое изменение! -->
">

{% for item in items %}
<div class="col col_14 product_gallery" style="
    width: 100%;
    text-align: center;
    padding: 20px;
    border: 1px solid #eee;
    border-radius: 8px;
    background: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-sizing: border-box;
    height: 400px;
">
    
    {% if item.image %}
    <a href="{{ item.get_absolute_url }}">
        <img src="{{ item.image.url }}" style="width: 100%; height: 150px; object-fit: contain;"/>
    </a>
    {% else %}
    <a href="{{ item.get_absolute_url }}">
        <img src="{{ default_image }}" style="width: 100%; height: 150px; object-fit: contain;"/>
    </a>
    {% endif %}

    <div style="flex: 1; width: 100%; padding-top: 15px; overflow: hidden;">
        <h2 style="margin: 0 0 10px; min-height: 45px; overflow: hidden;">
            <a href="{{ item.get_absolute_url }}" style="color: blue; font-size: 16px; text-decoration: none; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                {{ item.name }}
            </a>
        </h2>
        <p style="
            word-wrap: break-word;
            word-break: break-word;
            white-space: normal;
            max-width: 100%;
            line-height: 1.5;
        ">{{ item.description|truncatechars:35 }}</p>

    </div>

    <div style="width: 100%; margin-top: auto;">
        <p style="margin: 10px 0; font-size: 14px;">
            <strong>Продавец:</strong> {{ item.owner.first_name }}
        </p>
        <p class="product_price" style="font-size: 18px; font-weight: bold; color: #d32f2f; margin: 15px 0;">
            {{ item.price }} {{ item.currency.symbol }}
        </p>
    </div>

</div>        	
{% endfor %}
</div>

{% endblock %}
